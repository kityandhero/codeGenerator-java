(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{mLvl:function(e,t,a){"use strict";a.r(t);var n=a("k1fw"),o=(a("/xke"),a("TeRw")),c=(a("miYZ"),a("tsqr")),i=a("fWQN"),r=a("mtLc"),l=a("yKVA"),s=a("879j"),u=a("q1tI"),d=a.n(u),g=a("9kvl"),f=a("NT1f"),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M916 210H376c-17.7 0-32 14.3-32 32v236H108c-17.7 0-32 14.3-32 32v272c0 17.7 14.3 32 32 32h540c17.7 0 32-14.3 32-32V546h236c17.7 0 32-14.3 32-32V242c0-17.7-14.3-32-32-32zm-504 68h200v200H412V278zm-68 468H144V546h200v200zm268 0H412V546h200v200zm268-268H680V278h200v200z"}}]},name:"build",theme:"outlined"},b=p,m=a("6VBw"),h=function(e,t){return u["createElement"](m["a"],Object.assign({},e,{ref:t,icon:b}))};h.displayName="BuildOutlined";var C,v,y,k=u["forwardRef"](h),D=a("uJMD"),j=a("ydnR"),w=a("7pZ8"),I=a.n(w),O=a("i0ey"),T=a("WtmD"),P=a("/JhO"),A=a("ShOv"),L=(C=Object(g["a"])((function(e){var t=e.connectionConfig,a=e.databaseGeneratorConfig,n=e.global,o=e.loading;return{connectionConfig:t,databaseGeneratorConfig:a,global:n,loading:o.models.connectionConfig}})),C((y=function(e){Object(l["a"])(a,e);var t=Object(s["a"])(a);function a(e){var r;return Object(i["a"])(this,a),r=t.call(this,e),r.componentAuthority=I.a.connectionConfig.get,r.tabList=[{key:"basicInfo",show:r.checkAuthority(I.a.connectionConfig.get),tab:"\u57fa\u672c\u4fe1\u606f"},{key:"databaseGeneratorConfig",show:r.checkAuthority(I.a.databaseGeneratorConfig.getByConnectionId),tab:"\u751f\u6210\u914d\u7f6e"},{key:"dataTable/pageList",show:r.checkAuthority(I.a.dataTable.pageList),tab:"\u6570\u636e\u5e93\u8868"}],r.pageHeaderTitlePrefix=function(){return A["fieldData"].name.label},r.getApiData=function(e){var t=e.connectionConfig.data;return t},r.checkNeedUpdate=function(e,t,a){return Object(P["a"])(r.state,e,t,a)},r.supplementLoadRequestParams=function(e){var t=e,a=r.state.connectionConfigId;return t.connectionConfigId=a,t},r.afterLoadSuccess=function(e,t,a,n){r.setState({pageName:null===e?"":e.name||""})},r.handleMenuClick=function(e,t){var a=e.key;switch(a){default:break}},r.openProjectFolder=function(){var e=r.props.dispatch,t=r.state.metaData,a=t||{connectionConfigId:0},n=a.connectionConfigId;n<=0?c["a"].error("\u53c2\u6570\u9519\u8bef"):e({type:"databaseGeneratorConfig/openProjectFolder",payload:{connectionConfigId:n}}).then((function(){var e=r.props.databaseGeneratorConfig.data,t=e.dataSuccess;t&&requestAnimationFrame((function(){o["a"].success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u6253\u5f00\u9879\u76ee\u6587\u4ef6\u5939\u6210\u529f"})}))}))},r.generate=function(){var e=r.props.dispatch,t=r.state.connectionConfigId;"".concat(t||j["zeroInt"])!==j["zeroString"]?(r.setState({processing:!0}),e({type:"databaseGeneratorConfig/generate",payload:{connectionConfigId:t}}).then((function(){var e=r.props.databaseGeneratorConfig.data,t=e.dataSuccess;t&&requestAnimationFrame((function(){o["a"].success({placement:"bottomRight",message:"\u751f\u6210\u64cd\u4f5c\u7ed3\u679c",description:"\u5168\u90e8\u751f\u6210\u6210\u529f"})})),r.setState({processing:!1})}))):c["a"].error("\u7f3a\u5c11\u53c2\u6570")},r.pageHeaderActionExtraGroup=function(){var e=r.state,t=e.metaData,a=e.dataLoading,n=e.processing,o=[],c=[];if(null==t)return null;o.push({key:"openProjectFolder",loading:n,icon:d.a.createElement(f["a"],null),buttonProps:{disabled:a||n||null==t,onClick:function(){r.openProjectFolder()}},text:"\u6253\u5f00\u6587\u4ef6\u5939"}),r.checkAuthority(I.a.databaseGeneratorConfig.generate)&&o.push({key:"generate",loading:n,icon:d.a.createElement(k,null),buttonProps:{disabled:a||n||null==t,onClick:function(){r.generate()}},text:"\u751f\u6210\u5168\u90e8"});var i={props:{onClick:function(e){r.handleMenuClick(e,t)}},items:c};return{buttons:o,menu:i}},r.pageHeaderExtraContentData=function(){var e=r.state.metaData;return{textLabel:O["b"].statusNote.label,text:null===e?"":e.statusNote,timeLabel:O["b"].createTime.label,time:null===e?null:Object(D["P"])(e.createTime)}},r.pageHeaderContentData=function(){var e=r.state.metaData,t=[];return t.push({label:A["fieldData"].connectionConfigId.label,value:null===e?"":e.connectionConfigId,canCopy:!0}),t.push({label:A["fieldData"].schema.label,value:null===e?"":e.schema,canCopy:!1}),t.push({label:A["fieldData"].connectionType.label,value:r.getDatabaseConnectionTypeName(null===e?"":"".concat(e.connectionType||"")),canCopy:!1}),t.push({label:A["fieldData"].databaseType.label,value:r.getDatabaseDatabaseTypeName(null===e?"":"".concat(e.databaseType||""))}),t.push({label:A["fieldData"].encoding.label,value:r.getDatabaseEncodingName(null===e?"":"".concat(e.encoding||""))}),t},r.state=Object(n["a"])(Object(n["a"])({},r.state),{pageName:"",loadApiPath:"connectionConfig/get",backPath:"/connectionConfig/pageList/key",connectionConfigId:null}),r}return Object(r["a"])(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){return Object(D["n"])(e,t,{id:""},P["b"])}}]),a}(T["a"]),v=y))||v);t["default"]=L}}]);