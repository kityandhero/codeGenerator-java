(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{mLvl:function(e,a,t){"use strict";t.r(a);var n=t("m25k"),o=(t("dvU4"),t("q69F")),c=(t("ZJ1q"),t("t+QG")),i=t("Z6mO"),l=t("uf3W"),r=t("GkP1"),s=t("vVLA"),u=t("ZZRV"),d=t.n(u),f=t("9kvl"),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},p=g,b=t("EcdN"),m=function(e,a){return u["createElement"](b["a"],Object.assign({},e,{ref:a,icon:p}))};m.displayName="LinkOutlined";var h=u["forwardRef"](m),v=t("nd8m"),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M916 210H376c-17.7 0-32 14.3-32 32v236H108c-17.7 0-32 14.3-32 32v272c0 17.7 14.3 32 32 32h540c17.7 0 32-14.3 32-32V546h236c17.7 0 32-14.3 32-32V242c0-17.7-14.3-32-32-32zm-504 68h200v200H412V278zm-68 468H144V546h200v200zm268 0H412V546h200v200zm268-268H680V278h200v200z"}}]},name:"build",theme:"outlined"},y=C,k=function(e,a){return u["createElement"](b["a"],Object.assign({},e,{ref:a,icon:y}))};k.displayName="BuildOutlined";var D,L,j,O=u["forwardRef"](k),w=t("uJMD"),I=t("ydnR"),A=t("7pZ8"),G=t.n(A),P=t("i0ey"),N=t("WtmD"),T=t("/JhO"),H=t("ShOv"),x=(D=Object(f["a"])((function(e){var a=e.connectionConfig,t=e.databaseGeneratorConfig,n=e.global,o=e.loading;return{connectionConfig:a,databaseGeneratorConfig:t,global:n,loading:o.models.connectionConfig}})),D((j=function(e){Object(r["a"])(t,e);var a=Object(s["a"])(t);function t(e){var l;return Object(i["a"])(this,t),l=a.call(this,e),l.defaultAvatarIcon=d.a.createElement(h,null),l.componentAuthority=G.a.connectionConfig.get,l.tabList=[{key:"basicInfo",show:l.checkAuthority(G.a.connectionConfig.get),tab:"\u57fa\u672c\u4fe1\u606f"},{key:"databaseGeneratorConfig",show:l.checkAuthority(G.a.databaseGeneratorConfig.getByConnectionId),tab:"\u751f\u6210\u914d\u7f6e"},{key:"dataTable/pageList",show:l.checkAuthority(G.a.dataTable.pageList),tab:"\u6570\u636e\u5e93\u8868"}],l.pageHeaderTitlePrefix=function(){return H["fieldData"].name.label},l.getApiData=function(e){var a=e.connectionConfig.data;return a},l.checkNeedUpdate=function(e,a,t){return Object(T["a"])(l.state,e,a,t)},l.supplementLoadRequestParams=function(e){var a=e,t=l.state.connectionConfigId;return a.connectionConfigId=t,a},l.afterLoadSuccess=function(e,a,t,n){l.setState({pageName:null===e?"":e.name||""})},l.handleMenuClick=function(e,a){var t=e.key;switch(t){default:break}},l.openProjectFolder=function(){var e=l.props.dispatch,a=l.state.metaData,t=a||{connectionConfigId:0},n=t.connectionConfigId;n<=0?c["a"].error("\u53c2\u6570\u9519\u8bef"):e({type:"databaseGeneratorConfig/openProjectFolder",payload:{connectionConfigId:n}}).then((function(){var e=l.props.databaseGeneratorConfig.data,a=e.dataSuccess;a&&requestAnimationFrame((function(){o["a"].success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u6253\u5f00\u9879\u76ee\u6587\u4ef6\u5939\u6210\u529f"})}))}))},l.generate=function(){var e=l.props.dispatch,a=l.state.connectionConfigId;"".concat(a||I["i"])!==I["j"]?(l.setState({processing:!0}),e({type:"databaseGeneratorConfig/generate",payload:{connectionConfigId:a}}).then((function(){var e=l.props.databaseGeneratorConfig.data,a=e.dataSuccess;a&&requestAnimationFrame((function(){o["a"].success({placement:"bottomRight",message:"\u751f\u6210\u64cd\u4f5c\u7ed3\u679c",description:"\u5168\u90e8\u751f\u6210\u6210\u529f"})})),l.setState({processing:!1})}))):c["a"].error("\u7f3a\u5c11\u53c2\u6570")},l.pageHeaderActionExtraGroup=function(){var e=l.state,a=e.metaData,t=e.dataLoading,n=e.processing,o=[],c=[];if(null==a)return null;o.push({key:"openProjectFolder",loading:n,icon:d.a.createElement(v["a"],null),buttonProps:{disabled:t||n||null==a,onClick:function(){l.openProjectFolder()}},text:"\u6253\u5f00\u6587\u4ef6\u5939"}),l.checkAuthority(G.a.databaseGeneratorConfig.generate)&&o.push({key:"generate",loading:n,icon:d.a.createElement(O,null),buttonProps:{disabled:t||n||null==a,onClick:function(){l.generate()}},text:"\u751f\u6210\u5168\u90e8"});var i={props:{onClick:function(e){l.handleMenuClick(e,a)}},items:c};return{buttons:o,menu:i}},l.pageHeaderExtraContentData=function(){var e=l.state.metaData;return{textLabel:P["b"].statusNote.label,text:null===e?"":e.statusNote,timeLabel:P["b"].createTime.label,time:null===e?null:Object(w["Q"])(e.createTime)}},l.pageHeaderContentData=function(){var e=l.state.metaData,a=[];return a.push({label:H["fieldData"].connectionConfigId.label,value:null===e?"":e.connectionConfigId,canCopy:!0}),a.push({label:H["fieldData"].schema.label,value:null===e?"":e.schema,canCopy:!1}),a.push({label:H["fieldData"].connectionType.label,value:l.getDatabaseConnectionTypeName(null===e?"":"".concat(e.connectionType||"")),canCopy:!1}),a.push({label:H["fieldData"].databaseType.label,value:l.getDatabaseDatabaseTypeName(null===e?"":"".concat(e.databaseType||""))}),a.push({label:H["fieldData"].encoding.label,value:l.getDatabaseEncodingName(null===e?"":"".concat(e.encoding||""))}),a},l.state=Object(n["a"])(Object(n["a"])({},l.state),{pageName:"",loadApiPath:"connectionConfig/get",backPath:"/connectionConfig/pageList/key",connectionConfigId:null}),l}return Object(l["a"])(t,null,[{key:"getDerivedStateFromProps",value:function(e,a){return Object(w["o"])(e,a,{id:""},T["b"])}}]),t}(N["a"]),L=j))||L);a["default"]=x}}]);