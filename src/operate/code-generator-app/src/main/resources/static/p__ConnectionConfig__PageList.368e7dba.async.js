(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"Nv+D":function(e,t,a){"use strict";a.r(t);var n=a("m25k"),o=(a("pYCW"),a("T76X")),c=(a("fArn"),a("HjkH")),r=(a("xhcG"),a("HVoQ")),i=(a("w7NR"),a("2jvD")),l=(a("0GrD"),a("0qCI")),d=(a("ZM4h"),a("RLie")),m=(a("dvU4"),a("q69F")),s=(a("ZJ1q"),a("t+QG")),u=a("Z6mO"),g=a("+iVf"),f=a("GkP1"),p=a("vVLA"),h=(a("ZF2m"),a("NvNj")),b=a("ZZRV"),E=a.n(b),v=a("9kvl"),D=a("tTyY"),C=a("2CD1"),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},T=y,k=a("EcdN"),w=function(e,t){return b["createElement"](k["a"],Object.assign({},e,{ref:t,icon:T}))};w.displayName="DatabaseOutlined";var O,S,F,j=b["forwardRef"](w),I=a("EquI"),A=a("uJMD"),N=a("7pZ8"),x=a.n(N),L=a("ydnR"),M=a("i0ey"),H=a("35Mt"),V=a("lLw4"),z=a("paK7"),B=a("ShOv"),R=h["a"].confirm,Z=(O=Object(v["a"])((function(e){var t=e.connectionConfig,a=e.global,n=e.loading;return{connectionConfig:t,global:a,loading:n.models.connectionConfig}})),O((F=function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e){var f;return Object(u["a"])(this,a),f=t.call(this,e),f.componentAuthority=x.a.connectionConfig.list,f.getApiData=function(e){var t=e.connectionConfig.data;return t},f.handleItem=function(e,t){var a=f.state.metaOriginalData,n=-1;a.list.forEach((function(t,a){var o=t.connectionConfigId;o===e&&(n=a)})),n>=0&&(a.list[n]=t(a.list[n]),f.setState({metaOriginalData:a}))},f.removeConfirm=function(e){var t=Object(g["a"])(f),a=t.state.processing;R({title:"\u5220\u9664\u6570\u636e\u8fde\u63a5",content:"\u786e\u5b9a\u8981\u5220\u9664\u6570\u636e\u8fde\u63a5 ".concat(null==e?"":e.title," \u5417\uff1f"),okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",confirmLoading:{processing:a},onOk:function(){t.remove(e)},onCancel:function(){s["a"].info("\u53d6\u6d88\u4e86\u5220\u9664\u64cd\u4f5c\uff01")}})},f.remove=function(e){var t=f.props.dispatch,a=Object(A["G"])({},(function(t){var a=t;return a.connectionConfigId=e.connectionConfigId,a}));f.setState({processing:!0}),t({type:"connectionConfig/remove",payload:a}).then((function(){var e=f.props.connectionConfig.data,t=e.dataSuccess;t&&(requestAnimationFrame((function(){m["a"].success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u6570\u636e\u5df2\u7ecf\u5220\u9664\u6210\u529f\uff0c\u8bf7\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\u3002"})})),f.setState({processing:!1}),f.reloadData())}))},f.goToAdd=function(){var e={pathname:"/connectionConfig/add"};v["d"].push(e)},f.goToEdit=function(e){var t=e.connectionConfigId,a={pathname:"/connectionConfig/edit/load/".concat(t,"/key/basicInfo")};v["d"].push(a)},f.goToDataTablePageList=function(e){var t=e.connectionConfigId,a={pathname:"/connectionConfig/edit/load/".concat(t,"/key/dataTable/pageList")};v["d"].push(a)},f.handleMenuClick=function(e,t){var a=e.key;switch(a){case"delete":f.removeConfirm(t);break;case"openDatabase":f.openDatabase(t);break;default:break}},f.openDatabase=function(e){var t=f.props.dispatch,a=e.connectionConfigId;f.setState({processing:!0}),t({type:"connectionConfig/tryConnection",payload:{connectionConfigId:a}}).then((function(){var t=f.props.connectionConfig.data,a=t.dataSuccess;a?f.setState({processing:!1},(function(){f.goToDataTablePageList(e)})):f.setState({processing:!1})}))},f.renderBatchActionMenu=function(){return[{key:"batchDelete",name:"\u6279\u91cf\u5220\u9664",icon:E.a.createElement(D["a"],null)}]},f.onBatchActionSelect=function(e){switch(e){case"batchDelete":f.onBatchDelete();break;default:break}},f.onBatchDelete=function(){s["a"].info("onBatchDelete")},f.renderSimpleFormInitialValues=function(){var e={};return e[B["fieldData"].encoding.name]=L["f"].flag,e[B["fieldData"].databaseType.name]=L["f"].flag,e},f.renderSimpleFormRow=function(){return E.a.createElement(E.a.Fragment,null,E.a.createElement(l["a"],{gutter:24},E.a.createElement(d["a"],{lg:6,md:12,sm:24,xs:24},f.renderSearchInput(B["fieldData"].name.label,B["fieldData"].name.name,"\u4f9d\u636e\u540d\u79f0\u8fdb\u884c\u68c0\u7d22")),E.a.createElement(d["a"],{lg:6,md:12,sm:24,xs:24},f.renderSearchDatabaseEncodingSelect(!0)),E.a.createElement(d["a"],{lg:6,md:12,sm:24,xs:24},f.renderSearchDatabaseDatabaseTypeSelect(!0)),f.renderSimpleFormButton()))},f.renderExtraAction=function(){var e=f.state,t=e.dataLoading,a=e.processing;return f.checkAuthority(x.a.connectionConfig.add)?E.a.createElement(E.a.Fragment,null,E.a.createElement(i["a"],{type:"vertical"}),E.a.createElement(r["a"],{key:"buttonPlus",disabled:t||a,type:"primary",onClick:f.goToAdd},E.a.createElement(C["a"],null),"\u65b0\u589e")):null},f.getColumnWrapper=function(){return[{dataTarget:B["fieldData"].name,align:"left",render:function(e){return E.a.createElement(E.a.Fragment,null,e||"--")}},{dataTarget:B["fieldData"].schema,width:200,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,e||"--")}},{dataTarget:B["fieldData"].databaseType,width:120,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(V["a"],{tooltip:!0,lines:1},f.getDatabaseDatabaseTypeName("".concat(e||""))))}},{dataTarget:B["fieldData"].connectionType,width:120,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(V["a"],{tooltip:!0,lines:1},f.getDatabaseConnectionTypeName("".concat(e||""))))}},{dataTarget:B["fieldData"].encoding,width:120,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(V["a"],{tooltip:!0,lines:1},f.getDatabaseEncodingName("".concat(e||""))))}},{dataTarget:B["fieldData"].connectionConfigId,width:120,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(z["a"],{tooltip:!0,lines:1,removeChildren:!0,extraContent:E.a.createElement(E.a.Fragment,null,E.a.createElement("a",{onClick:function(){Object(A["d"])(e)}},Object(A["L"])(e,"***",2,6)))},e," [\u70b9\u51fb\u590d\u5236]"))}},{dataTarget:M["b"].channelNote,width:160,align:"center",render:function(e,t){return E.a.createElement(E.a.Fragment,null,E.a.createElement(V["a"],{tooltip:!0,lines:1},t.channelNote))}},{dataTarget:M["b"].createTime,width:140,align:"center",sorter:!1,render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(V["a"],{tooltip:!0,lines:1},""===(e||"")?"--":Object(A["m"])(Object(A["R"])(e),"YYYY-MM-DD HH:mm")))}},{dataTarget:M["b"].customOperate,width:106,fixed:"right",align:"center",render:function(e,t){return E.a.createElement(E.a.Fragment,null,E.a.createElement(o["a"].Button,{size:"small",onClick:function(){return f.goToEdit(t)},overlay:E.a.createElement(c["a"],{onClick:function(e){return f.handleMenuClick(e,t)}},E.a.createElement(c["a"].Item,{key:"openDatabase"},E.a.createElement(j,null),"\u8fde\u63a5\u6570\u636e\u5e93"),E.a.createElement(c["a"].Item,{key:"delete"},E.a.createElement(D["a"],null),"\u5220\u9664\u8fde\u63a5"))},E.a.createElement(I["a"],null),"\u4fee\u6539"))}}]},f.state=Object(n["a"])(Object(n["a"])({},f.state),{pageName:"\u6570\u636e\u8fde\u63a5\u5217\u8868",paramsKey:"938bdc77-66b5-4afe-835b-9aa64a7ead5b",loadApiPath:"connectionConfig/pageList",showSelect:!0}),f}return a}(H["a"]),S=F))||S);t["default"]=Z}}]);