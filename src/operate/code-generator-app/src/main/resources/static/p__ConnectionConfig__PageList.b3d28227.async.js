(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"Nv+D":function(e,a,n){"use strict";n.r(a);var t=n("xFFA"),o=(n("kRns"),n("fAaz")),i=(n("ASDf"),n("g9Mj")),c=(n("FLGs"),n("P/eI")),r=(n("0uyE"),n("gu/I")),l=(n("EVT3"),n("jKSN")),d=(n("zx9L"),n("owjU")),m=(n("1wJP"),n("C8Iy")),s=(n("spZx"),n("rgyI")),u=n("QyQr"),f=n("IKaX"),g=n("pUne"),p=n("euny"),b=(n("blkr"),n("ssT7")),h=n("ZZRV"),D=n.n(h),E=n("9kvl"),C=n("gfHz"),v=n("2Fq8"),y={name:"database",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]}},I=y,k=n("340B"),F=function(e,a){return h["createElement"](k["a"],Object.assign({},e,{ref:a,icon:I}))};F.displayName="DatabaseOutlined";var T,w,x,S=h["forwardRef"](F),O=n("H5Qz"),j=n("uJMD"),z=n("7pZ8"),A=n.n(z),L=n("ydnR"),N=n("i0ey"),B=n("zmXK"),M=n("lLw4"),H=n("paK7"),P=n("ShOv"),V=b["a"].confirm,R=(T=Object(E["a"])((function(e){var a=e.connectionConfig,n=e.global,t=e.loading;return{connectionConfig:a,global:n,loading:t.models.connectionConfig}})),T((x=function(e){Object(g["a"])(n,e);var a=Object(p["a"])(n);function n(e){var g;return Object(u["a"])(this,n),g=a.call(this,e),g.componentAuthority=A.a.connectionConfig.list,g.getApiData=function(e){var a=e.connectionConfig.data;return a},g.handleItem=function(e,a){var n=g.state.metaOriginalData,t=-1;n.list.forEach((function(a,n){var o=a.connectionConfigId;o===e&&(t=n)})),t>=0&&(n.list[t]=a(n.list[t]),g.setState({metaOriginalData:n}))},g.removeConfirm=function(e){var a=Object(f["a"])(g),n=a.state.processing;V({title:"\u5220\u9664\u6570\u636e\u8fde\u63a5",content:"\u786e\u5b9a\u8981\u5220\u9664\u6570\u636e\u8fde\u63a5 ".concat(null==e?"":e.title," \u5417\uff1f"),okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",confirmLoading:{processing:n},onOk:function(){a.remove(e)},onCancel:function(){s["a"].info("\u53d6\u6d88\u4e86\u5220\u9664\u64cd\u4f5c\uff01")}})},g.remove=function(e){var a=g.props.dispatch,n=Object(j["L"])({},(function(a){var n=a;return n.connectionConfigId=e.connectionConfigId,n}));g.setState({processing:!0}),a({type:"connectionConfig/remove",payload:n}).then((function(){var e=g.props.connectionConfig.data,a=e.dataSuccess;a&&(requestAnimationFrame((function(){m["a"].success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u6570\u636e\u5df2\u7ecf\u5220\u9664\u6210\u529f\uff0c\u8bf7\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\u3002"})})),g.setState({processing:!1}),g.reloadData())}))},g.goToAdd=function(){var e={pathname:"/connectionConfig/add"};E["d"].push(e)},g.goToEdit=function(e){var a=e.connectionConfigId,n={pathname:"/connectionConfig/edit/load/".concat(a,"/key/basicInfo")};E["d"].push(n)},g.goToDataTablePageList=function(e){var a=e.connectionConfigId,n={pathname:"/connectionConfig/edit/load/".concat(a,"/key/dataTable/pageList")};E["d"].push(n)},g.handleMenuClick=function(e,a){var n=e.key;switch(n){case"delete":g.removeConfirm(a);break;case"openDatabase":g.openDatabase(a);break;default:break}},g.openDatabase=function(e){var a=g.props.dispatch,n=e.connectionConfigId;g.setState({processing:!0}),a({type:"connectionConfig/tryConnection",payload:{connectionConfigId:n}}).then((function(){var a=g.props.connectionConfig.data,n=a.dataSuccess;n?g.setState({processing:!1},(function(){g.goToDataTablePageList(e)})):g.setState({processing:!1})}))},g.renderBatchActionMenu=function(){return[{key:"batchDelete",name:"\u6279\u91cf\u5220\u9664",icon:D.a.createElement(C["a"],null)}]},g.onBatchActionSelect=function(e){switch(e){case"batchDelete":g.onBatchDelete();break;default:break}},g.onBatchDelete=function(){s["a"].info("onBatchDelete")},g.renderSimpleFormInitialValues=function(){var e={};return e[P["fieldData"].encoding.name]=L["unlimitedWithStringFlag"].flag,e[P["fieldData"].databaseType.name]=L["unlimitedWithStringFlag"].flag,e},g.renderSimpleFormRow=function(){return D.a.createElement(D.a.Fragment,null,D.a.createElement(l["a"],{gutter:24},D.a.createElement(d["a"],{lg:6,md:12,sm:24,xs:24},g.renderSearchInputFormItem(P["fieldData"].name.label,P["fieldData"].name.name,"\u4f9d\u636e\u540d\u79f0\u8fdb\u884c\u68c0\u7d22")),D.a.createElement(d["a"],{lg:6,md:12,sm:24,xs:24},g.renderSearchDatabaseEncodingFormItem(!0)),D.a.createElement(d["a"],{lg:6,md:12,sm:24,xs:24},g.renderSearchDatabaseDatabaseTypeFormItem(!0)),g.renderSimpleFormButton()))},g.renderExtraAction=function(){var e=g.state,a=e.dataLoading,n=e.processing;return g.checkAuthority(A.a.connectionConfig.add)?D.a.createElement(D.a.Fragment,null,D.a.createElement(r["a"],{type:"vertical"}),D.a.createElement(c["a"],{key:"buttonPlus",disabled:a||n,type:"primary",icon:D.a.createElement(v["a"],null),onClick:g.goToAdd},"\u65b0\u589e")):null},g.getColumn=function(){return[{title:P["fieldData"].name.label,dataIndex:P["fieldData"].name.name,align:"left",render:function(e){return D.a.createElement(D.a.Fragment,null,e||"--")}},{title:P["fieldData"].schema.label,dataIndex:P["fieldData"].schema.name,width:200,align:"center",render:function(e){return D.a.createElement(D.a.Fragment,null,e||"--")}},{title:P["fieldData"].databaseType.label,dataIndex:P["fieldData"].databaseType.name,width:120,align:"center",render:function(e){return D.a.createElement(D.a.Fragment,null,D.a.createElement(M["a"],{tooltip:!0,lines:1},g.getDatabaseDatabaseTypeName("".concat(e||""))))}},{title:P["fieldData"].connectionType.label,dataIndex:P["fieldData"].connectionType.name,width:120,align:"center",render:function(e){return D.a.createElement(D.a.Fragment,null,D.a.createElement(M["a"],{tooltip:!0,lines:1},g.getDatabaseConnectionTypeName("".concat(e||""))))}},{title:P["fieldData"].encoding.label,dataIndex:P["fieldData"].encoding.name,width:120,align:"center",render:function(e){return D.a.createElement(D.a.Fragment,null,D.a.createElement(M["a"],{tooltip:!0,lines:1},g.getDatabaseEncodingName("".concat(e||""))))}},{title:P["fieldData"].connectionConfigId.label,dataIndex:P["fieldData"].connectionConfigId.name,width:120,align:"center",render:function(e){return D.a.createElement(D.a.Fragment,null,D.a.createElement(H["a"],{tooltip:!0,lines:1,removeChildren:!0,extraContent:D.a.createElement(D.a.Fragment,null,D.a.createElement("a",{onClick:function(){Object(j["h"])(e)}},Object(j["P"])(e,"***",2,6)))},e," [\u70b9\u51fb\u590d\u5236]"))}},{title:N["a"].channelNote.label,dataIndex:N["a"].channelNote.name,width:160,align:"center",render:function(e,a){return D.a.createElement(D.a.Fragment,null,D.a.createElement(M["a"],{tooltip:!0,lines:1},a.channelNote))}},{title:N["a"].createTime.label,dataIndex:N["a"].createTime.name,width:140,align:"center",sorter:!1,render:function(e){return D.a.createElement(D.a.Fragment,null,D.a.createElement(M["a"],{tooltip:!0,lines:1},""===(e||"")?"--":Object(j["q"])(Object(j["X"])(e),"YYYY-MM-DD HH:mm")))}},{title:N["a"].customOperate.label,dataIndex:N["a"].customOperate.name,width:106,fixed:"right",align:"center",render:function(e,a){return D.a.createElement(D.a.Fragment,null,D.a.createElement(o["a"].Button,{size:"small",onClick:function(){return g.goToEdit(a)},overlay:D.a.createElement(i["a"],{onClick:function(e){return g.handleMenuClick(e,a)}},D.a.createElement(i["a"].Item,{key:"openDatabase"},D.a.createElement(S,null),"\u8fde\u63a5\u6570\u636e\u5e93"),D.a.createElement(i["a"].Item,{key:"delete"},D.a.createElement(C["a"],null),"\u5220\u9664\u8fde\u63a5"))},D.a.createElement(O["a"],null),"\u4fee\u6539"))}}]},g.state=Object(t["a"])({},g.state,{},{pageName:"\u6570\u636e\u8fde\u63a5\u5217\u8868",paramsKey:"938bdc77-66b5-4afe-835b-9aa64a7ead5b",loadApiPath:"connectionConfig/pageList",showSelect:!0}),g}return n}(B["a"]),w=x))||w);a["default"]=R}}]);