(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{mLvl:function(e,a,t){"use strict";t.r(a);var n=t("m25k"),o=(t("dvU4"),t("q69F")),c=(t("ZJ1q"),t("t+QG")),i=t("Z6mO"),r=t("uf3W"),l=t("GkP1"),s=t("vVLA"),u=t("ZZRV"),d=t.n(u),g=t("9kvl"),p=t("nd8m"),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M916 210H376c-17.7 0-32 14.3-32 32v236H108c-17.7 0-32 14.3-32 32v272c0 17.7 14.3 32 32 32h540c17.7 0 32-14.3 32-32V546h236c17.7 0 32-14.3 32-32V242c0-17.7-14.3-32-32-32zm-504 68h200v200H412V278zm-68 468H144V546h200v200zm268 0H412V546h200v200zm268-268H680V278h200v200z"}}]},name:"build",theme:"outlined"},b=f,m=t("EcdN"),h=function(e,a){return u["createElement"](m["a"],Object.assign({},e,{ref:a,icon:b}))};h.displayName="BuildOutlined";var C,v,y,k=u["forwardRef"](h),D=t("uJMD"),j=t("ydnR"),O=t("7pZ8"),P=t.n(O),w=t("i0ey"),G=t("WtmD"),I=t("/JhO"),A=t("ShOv"),L=(C=Object(g["a"])((function(e){var a=e.connectionConfig,t=e.databaseGeneratorConfig,n=e.global,o=e.loading;return{connectionConfig:a,databaseGeneratorConfig:t,global:n,loading:o.models.connectionConfig}})),C((y=function(e){Object(l["a"])(t,e);var a=Object(s["a"])(t);function t(e){var r;return Object(i["a"])(this,t),r=a.call(this,e),r.componentAuthority=P.a.connectionConfig.get,r.tabList=[{key:"basicInfo",show:r.checkAuthority(P.a.connectionConfig.get),tab:"\u57fa\u672c\u4fe1\u606f"},{key:"databaseGeneratorConfig",show:r.checkAuthority(P.a.databaseGeneratorConfig.getByConnectionId),tab:"\u751f\u6210\u914d\u7f6e"},{key:"dataTable/pageList",show:r.checkAuthority(P.a.dataTable.pageList),tab:"\u6570\u636e\u5e93\u8868"}],r.pageHeaderTitlePrefix=function(){return A["fieldData"].name.label},r.getApiData=function(e){var a=e.connectionConfig.data;return a},r.checkNeedUpdate=function(e,a,t){return Object(I["a"])(r.state,e,a,t)},r.supplementLoadRequestParams=function(e){var a=e,t=r.state.connectionConfigId;return a.connectionConfigId=t,a},r.afterLoadSuccess=function(e,a,t,n){r.setState({pageName:null===e?"":e.name||""})},r.handleMenuClick=function(e,a){var t=e.key;switch(t){default:break}},r.openProjectFolder=function(){var e=r.props.dispatch,a=r.state.metaData,t=a||{connectionConfigId:0},n=t.connectionConfigId;n<=0?c["a"].error("\u53c2\u6570\u9519\u8bef"):e({type:"databaseGeneratorConfig/openProjectFolder",payload:{connectionConfigId:n}}).then((function(){var e=r.props.databaseGeneratorConfig.data,a=e.dataSuccess;a&&requestAnimationFrame((function(){o["a"].success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u6253\u5f00\u9879\u76ee\u6587\u4ef6\u5939\u6210\u529f"})}))}))},r.generate=function(){var e=r.props.dispatch,a=r.state.connectionConfigId;"".concat(a||j["i"])!==j["j"]?(r.setState({processing:!0}),e({type:"databaseGeneratorConfig/generate",payload:{connectionConfigId:a}}).then((function(){var e=r.props.databaseGeneratorConfig.data,a=e.dataSuccess;a&&requestAnimationFrame((function(){o["a"].success({placement:"bottomRight",message:"\u751f\u6210\u64cd\u4f5c\u7ed3\u679c",description:"\u5168\u90e8\u751f\u6210\u6210\u529f"})})),r.setState({processing:!1})}))):c["a"].error("\u7f3a\u5c11\u53c2\u6570")},r.pageHeaderActionExtraGroup=function(){var e=r.state,a=e.metaData,t=e.dataLoading,n=e.processing,o=[],c=[];if(null==a)return null;o.push({key:"openProjectFolder",loading:n,icon:d.a.createElement(p["a"],null),buttonProps:{disabled:t||n||null==a,onClick:function(){r.openProjectFolder()}},text:"\u6253\u5f00\u6587\u4ef6\u5939"}),r.checkAuthority(P.a.databaseGeneratorConfig.generate)&&o.push({key:"generate",loading:n,icon:d.a.createElement(k,null),buttonProps:{disabled:t||n||null==a,onClick:function(){r.generate()}},text:"\u751f\u6210\u5168\u90e8"});var i={props:{onClick:function(e){r.handleMenuClick(e,a)}},items:c};return{buttons:o,menu:i}},r.pageHeaderExtraContentData=function(){var e=r.state.metaData;return{textLabel:w["b"].statusNote.label,text:null===e?"":e.statusNote,timeLabel:w["b"].createTime.label,time:null===e?null:Object(D["P"])(e.createTime)}},r.pageHeaderContentData=function(){var e=r.state.metaData,a=[];return a.push({label:A["fieldData"].connectionConfigId.label,value:null===e?"":e.connectionConfigId,canCopy:!0}),a.push({label:A["fieldData"].schema.label,value:null===e?"":e.schema,canCopy:!1}),a.push({label:A["fieldData"].connectionType.label,value:r.getDatabaseConnectionTypeName(null===e?"":"".concat(e.connectionType||"")),canCopy:!1}),a.push({label:A["fieldData"].databaseType.label,value:r.getDatabaseDatabaseTypeName(null===e?"":"".concat(e.databaseType||""))}),a.push({label:A["fieldData"].encoding.label,value:r.getDatabaseEncodingName(null===e?"":"".concat(e.encoding||""))}),a},r.state=Object(n["a"])(Object(n["a"])({},r.state),{pageName:"",loadApiPath:"connectionConfig/get",backPath:"/connectionConfig/pageList/key",connectionConfigId:null}),r}return Object(r["a"])(t,null,[{key:"getDerivedStateFromProps",value:function(e,a){return Object(D["n"])(e,a,{id:""},I["b"])}}]),t}(G["a"]),v=y))||v);a["default"]=L}}]);