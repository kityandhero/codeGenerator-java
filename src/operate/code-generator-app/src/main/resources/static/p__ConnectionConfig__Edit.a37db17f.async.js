(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{mLvl:function(e,a,t){"use strict";t.r(a);var n=t("xFFA"),o=(t("EL8K"),t("enry")),c=(t("1wJP"),t("C8Iy")),i=(t("spZx"),t("rgyI")),r=t("QyQr"),l=t("G2pS"),s=t("pUne"),u=t("euny"),d=t("ZZRV"),g=t.n(d),p=t("9kvl"),f=t("nOs7"),b={name:"build",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M916 210H376c-17.7 0-32 14.3-32 32v236H108c-17.7 0-32 14.3-32 32v272c0 17.7 14.3 32 32 32h540c17.7 0 32-14.3 32-32V546h236c17.7 0 32-14.3 32-32V242c0-17.7-14.3-32-32-32zm-504 68h200v200H412V278zm-68 468H144V546h200v200zm268 0H412V546h200v200zm268-268H680V278h200v200z"}}]}},m=b,h=t("340B"),C=function(e,a){return d["createElement"](h["a"],Object.assign({},e,{ref:a,icon:m}))};C.displayName="BuildOutlined";var v,y,k,D=d["forwardRef"](C),I=t("uJMD"),j=t("ydnR"),O=t("7pZ8"),w=t.n(O),L=t("i0ey"),A=t("KNI+"),G=t("/JhO"),P=t("ShOv"),S=(v=Object(p["a"])((function(e){var a=e.connectionConfig,t=e.databaseGeneratorConfig,n=e.global,o=e.loading;return{connectionConfig:a,databaseGeneratorConfig:t,global:n,loading:o.models.connectionConfig}})),v((k=function(e){Object(s["a"])(t,e);var a=Object(u["a"])(t);function t(e){var l;return Object(r["a"])(this,t),l=a.call(this,e),l.componentAuthority=w.a.connectionConfig.get,l.tabList=[{key:"basicInfo",show:l.checkAuthority(w.a.connectionConfig.get),tab:"\u57fa\u672c\u4fe1\u606f"},{key:"databaseGeneratorConfig",show:l.checkAuthority(w.a.databaseGeneratorConfig.getByConnectionId),tab:"\u751f\u6210\u914d\u7f6e"},{key:"dataTable/pageList",show:l.checkAuthority(w.a.dataTable.pageList),tab:"\u6570\u636e\u5e93\u8868"}],l.getApiData=function(e){var a=e.connectionConfig.data;return a},l.checkNeedUpdate=function(e,a,t){return Object(G["a"])(l.state,e,a,t)},l.supplementLoadRequestParams=function(e){var a=e,t=l.state.connectionConfigId;return a.connectionConfigId=t,a},l.afterLoadSuccess=function(e,a,t,n){l.setState({pageName:"".concat(P["fieldData"].name.label,"\uff1a").concat(null===e?"":e.name||"")})},l.handleMenuClick=function(e,a){var t=e.key;switch(t){default:break}},l.openProjectFolder=function(){var e=l.props.dispatch,a=l.state.metaData,t=a||{connectionConfigId:0},n=t.connectionConfigId;n<=0?i["a"].error("\u53c2\u6570\u9519\u8bef"):e({type:"databaseGeneratorConfig/openProjectFolder",payload:{connectionConfigId:n}}).then((function(){var e=l.props.databaseGeneratorConfig.data,a=e.dataSuccess;a&&requestAnimationFrame((function(){c["a"].success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u6253\u5f00\u9879\u76ee\u6587\u4ef6\u5939\u6210\u529f"})}))}))},l.generate=function(){var e=l.props.dispatch,a=l.state.connectionConfigId;"".concat(a||j["zeroInt"])!==j["zeroString"]?(l.setState({processing:!0}),e({type:"databaseGeneratorConfig/generate",payload:{connectionConfigId:a}}).then((function(){var e=l.props.databaseGeneratorConfig.data,a=e.dataSuccess;a&&requestAnimationFrame((function(){c["a"].success({placement:"bottomRight",message:"\u751f\u6210\u64cd\u4f5c\u7ed3\u679c",description:"\u5168\u90e8\u751f\u6210\u6210\u529f"})})),l.setState({processing:!1})}))):i["a"].error("\u7f3a\u5c11\u53c2\u6570")},l.pageHeaderLogo=function(){var e=l.state.metaData;return g.a.createElement(o["a"],{size:"large",src:null===e?"":e.imageUrl||"/noImageSmall.png"})},l.pageHeaderActionExtraGroup=function(){var e=l.state,a=e.metaData,t=e.dataLoading,n=e.processing,o=[],c=[];if(null==a)return null;o.push({key:"openProjectFolder",loading:n,icon:g.a.createElement(f["a"],null),buttonProps:{disabled:t||n||null==a,onClick:function(){l.openProjectFolder()}},text:"\u6253\u5f00\u6587\u4ef6\u5939"}),l.checkAuthority(w.a.databaseGeneratorConfig.generate)&&o.push({key:"generate",loading:n,icon:g.a.createElement(D,null),buttonProps:{disabled:t||n||null==a,onClick:function(){l.generate()}},text:"\u751f\u6210\u5168\u90e8"});var i={props:{onClick:function(e){l.handleMenuClick(e,a)}},items:c};return{buttons:o,menu:i}},l.pageHeaderExtraContentData=function(){var e=l.state.metaData;return{textLabel:L["a"].statusNote.label,text:null===e?"":e.statusNote,timeLabel:L["a"].createTime.label,time:null===e?null:Object(I["X"])(e.createTime)}},l.pageHeaderContentData=function(){var e=l.state.metaData,a=[];return a.push({label:P["fieldData"].connectionConfigId.label,value:null===e?"":e.connectionConfigId,canCopy:!0}),a.push({label:P["fieldData"].schema.label,value:null===e?"":e.schema,canCopy:!1}),a.push({label:P["fieldData"].connectionType.label,value:l.getDatabaseConnectionTypeName(null===e?"":"".concat(e.connectionType||"")),canCopy:!1}),a.push({label:P["fieldData"].databaseType.label,value:l.getDatabaseDatabaseTypeName(null===e?"":"".concat(e.databaseType||""))}),a.push({label:P["fieldData"].encoding.label,value:l.getDatabaseEncodingName(null===e?"":"".concat(e.encoding||""))}),a},l.state=Object(n["a"])({},l.state,{},{pageName:"".concat(P["fieldData"].name.label,"\uff1a"),loadApiPath:"connectionConfig/get",backPath:"/connectionConfig/pageList/key",connectionConfigId:null}),l}return Object(l["a"])(t,null,[{key:"getDerivedStateFromProps",value:function(e,a){return Object(I["r"])(e,a,{id:""},G["b"])}}]),t}(A["a"]),y=k))||y);a["default"]=S}}]);