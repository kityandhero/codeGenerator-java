(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"Nv+D":function(e,t,n){"use strict";n.r(t);var a,c,o,i=n("tUtL"),r=(n("GNcb"),n("4oke")),l=(n("w2Ck"),n("RFW6")),d=(n("jlqO"),n("Hbi4")),u=(n("fCxh"),n("5Q+V")),m=(n("l4mJ"),n("ET+S")),s=(n("WIuS"),n("EdvG")),f=(n("Bqa8"),n("sNGJ")),g=(n("cctN"),n("4Aw8")),p=n("Xh3J"),b=n("CibE"),h=n("B6Sf"),D=n("K89m"),E=n("elvB"),C=(n("I+9K"),n("2mNJ")),y=n("ZZRV"),v=n.n(y),I=n("svyS"),k=n("9kvl"),S=n("n3tF"),F=n("z4u9"),T=n("ui65"),O=n("kJ/V"),w=n("uJMD"),x=n("7pZ8"),j=n.n(x),N=n("ydnR"),A=n("i0ey"),B=n("zmXK"),R=n("lLw4"),J=n("paK7"),L=n("ShOv");function K(e){return function(){var t,n=Object(D["a"])(e);if(M()){var a=Object(D["a"])(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(h["a"])(this,t)}}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var P=C["a"].confirm,W=(a=Object(I["c"])((function(e){var t=e.connectionConfig,n=e.global,a=e.loading;return{connectionConfig:t,global:n,loading:a.models.connectionConfig}})),a((o=function(e){Object(E["a"])(n,e);var t=K(n);function n(e){var a;return Object(p["a"])(this,n),a=t.call(this,e),a.componentAuthority=j.a.connectionConfig.list,a.getApiData=function(e){var t=e.connectionConfig.data;return t},a.handleItem=function(e,t){var n=a.state.metaOriginalData,c=-1;n.list.forEach((function(t,n){var a=t.connectionConfigId;a===e&&(c=n)})),c>=0&&(n.list[c]=t(n.list[c]),a.setState({metaOriginalData:n}))},a.removeConfirm=function(e){var t=Object(b["a"])(a),n=t.state.processing;P({title:"\u5220\u9664\u6570\u636e\u8fde\u63a5",content:"\u786e\u5b9a\u8981\u5220\u9664\u6570\u636e\u8fde\u63a5 ".concat(null==e?"":e.title," \u5417\uff1f"),okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",confirmLoading:{processing:n},onOk:function(){t.remove(e)},onCancel:function(){g["a"].info("\u53d6\u6d88\u4e86\u5220\u9664\u64cd\u4f5c\uff01")}})},a.remove=function(e){var t=a.props.dispatch,n=Object(w["K"])({},(function(t){var n=t;return n.connectionConfigId=e.connectionConfigId,n}));a.setState({processing:!0}),t({type:"connectionConfig/remove",payload:n}).then((function(){var e=a.props.connectionConfig.data,t=e.dataSuccess;t&&(requestAnimationFrame((function(){f["a"].success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u6570\u636e\u5df2\u7ecf\u5220\u9664\u6210\u529f\uff0c\u8bf7\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\u3002"})})),a.setState({processing:!1}),a.reloadData())}))},a.goToAdd=function(){var e={pathname:"/connectionConfig/add"};k["d"].push(e)},a.goToEdit=function(e){var t=e.connectionConfigId,n={pathname:"/connectionConfig/edit/load/".concat(t,"/key/basicInfo")};k["d"].push(n)},a.goToDataTablePageList=function(e){var t=e.connectionConfigId,n={pathname:"/connectionConfig/edit/load/".concat(t,"/key/dataTable/pageList")};k["d"].push(n)},a.handleMenuClick=function(e,t){var n=e.key;switch(n){case"delete":a.removeConfirm(t);break;case"openDatabase":a.openDatabase(t);break;default:break}},a.openDatabase=function(e){var t=a.props.dispatch,n=e.connectionConfigId;a.setState({processing:!0}),t({type:"connectionConfig/tryConnection",payload:{connectionConfigId:n}}).then((function(){var t=a.props.connectionConfig.data,n=t.dataSuccess;n?a.setState({processing:!1},(function(){a.goToDataTablePageList(e)})):a.setState({processing:!1})}))},a.renderBatchActionMenu=function(){return[{key:"batchDelete",name:"\u6279\u91cf\u5220\u9664",icon:v.a.createElement(S["a"],null)}]},a.onBatchActionSelect=function(e){switch(e){case"batchDelete":a.onBatchDelete();break;default:break}},a.onBatchDelete=function(){g["a"].info("onBatchDelete")},a.renderSimpleFormInitialValues=function(){var e={};return e[L["fieldData"].encoding.name]=N["unlimitedWithStringFlag"].flag,e[L["fieldData"].databaseType.name]=N["unlimitedWithStringFlag"].flag,e},a.renderSimpleFormRow=function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement(m["a"],{gutter:24},v.a.createElement(s["a"],{lg:6,md:12,sm:24,xs:24},a.renderSearchInputFormItem(L["fieldData"].name.label,L["fieldData"].name.name,Object(w["f"])("\u4f9d\u636e\u540d\u79f0\u8fdb\u884c\u68c0\u7d22"))),v.a.createElement(s["a"],{lg:6,md:12,sm:24,xs:24},a.renderSearchDatabaseEncodingFormItem(!0)),v.a.createElement(s["a"],{lg:6,md:12,sm:24,xs:24},a.renderSearchDatabaseDatabaseTypeFormItem(!0)),a.renderSimpleFormButton()))},a.renderExtraAction=function(){var e=a.state,t=e.dataLoading,n=e.processing;return a.checkAuthority(j.a.connectionConfig.add)?v.a.createElement(v.a.Fragment,null,v.a.createElement(u["a"],{type:"vertical"}),v.a.createElement(d["a"],{key:"buttonPlus",disabled:t||n,type:"primary",icon:v.a.createElement(F["a"],null),onClick:a.goToAdd},"\u65b0\u589e")):null},a.getColumn=function(){return[{title:L["fieldData"].name.label,dataIndex:L["fieldData"].name.name,align:"left",render:function(e){return v.a.createElement(v.a.Fragment,null,e||"--")}},{title:L["fieldData"].schema.label,dataIndex:L["fieldData"].schema.name,width:200,align:"center",render:function(e){return v.a.createElement(v.a.Fragment,null,e||"--")}},{title:L["fieldData"].databaseType.label,dataIndex:L["fieldData"].databaseType.name,width:120,align:"center",render:function(e){return v.a.createElement(v.a.Fragment,null,v.a.createElement(R["a"],{tooltip:!0,lines:1},a.getDatabaseDatabaseTypeName("".concat(e||""))))}},{title:L["fieldData"].connectionType.label,dataIndex:L["fieldData"].connectionType.name,width:120,align:"center",render:function(e){return v.a.createElement(v.a.Fragment,null,v.a.createElement(R["a"],{tooltip:!0,lines:1},a.getDatabaseConnectionTypeName("".concat(e||""))))}},{title:L["fieldData"].encoding.label,dataIndex:L["fieldData"].encoding.name,width:120,align:"center",render:function(e){return v.a.createElement(v.a.Fragment,null,v.a.createElement(R["a"],{tooltip:!0,lines:1},a.getDatabaseEncodingName("".concat(e||""))))}},{title:L["fieldData"].connectionConfigId.label,dataIndex:L["fieldData"].connectionConfigId.name,width:120,align:"center",render:function(e){return v.a.createElement(v.a.Fragment,null,v.a.createElement(J["a"],{tooltip:!0,lines:1,removeChildren:!0,extraContent:v.a.createElement(v.a.Fragment,null,v.a.createElement("a",{onClick:function(){Object(w["h"])(e)}},Object(w["O"])(e,"***",2,6)))},e," [\u70b9\u51fb\u590d\u5236]"))}},{title:A["a"].channelNote.label,dataIndex:A["a"].channelNote.name,width:160,align:"center",render:function(e,t){return v.a.createElement(v.a.Fragment,null,v.a.createElement(R["a"],{tooltip:!0,lines:1},t.channelNote))}},{title:A["a"].createTime.label,dataIndex:A["a"].createTime.name,width:140,align:"center",sorter:!1,render:function(e){return v.a.createElement(v.a.Fragment,null,v.a.createElement(R["a"],{tooltip:!0,lines:1},""===(e||"")?"--":Object(w["q"])(Object(w["W"])(e),"YYYY-MM-DD HH:mm")))}},{title:A["a"].customOperate.label,dataIndex:A["a"].customOperate.name,width:106,fixed:"right",align:"center",render:function(e,t){return v.a.createElement(v.a.Fragment,null,v.a.createElement(r["a"].Button,{size:"small",onClick:function(){return a.goToEdit(t)},overlay:v.a.createElement(l["a"],{onClick:function(e){return a.handleMenuClick(e,t)}},v.a.createElement(l["a"].Item,{key:"openDatabase"},v.a.createElement(T["a"],null),"\u8fde\u63a5\u6570\u636e\u5e93"),v.a.createElement(l["a"].Item,{key:"delete"},v.a.createElement(S["a"],null),"\u5220\u9664\u8fde\u63a5"))},v.a.createElement(O["a"],null),"\u4fee\u6539"))}}]},a.state=Object(i["a"])({},a.state,{},{pageName:"\u6570\u636e\u8fde\u63a5\u5217\u8868",paramsKey:"938bdc77-66b5-4afe-835b-9aa64a7ead5b",loadApiPath:"connectionConfig/pageList",showSelect:!0}),a}return n}(B["a"]),c=o))||c);t["default"]=W}}]);