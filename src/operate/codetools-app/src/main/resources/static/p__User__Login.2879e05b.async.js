(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"7PPT":function(e,t,a){e.exports={login:"antd-pro-pages-user-login-components-login-index-login",getCaptcha:"antd-pro-pages-user-login-components-login-index-getCaptcha",icon:"antd-pro-pages-user-login-components-login-index-icon",other:"antd-pro-pages-user-login-components-login-index-other",register:"antd-pro-pages-user-login-components-login-index-register",prefixIcon:"antd-pro-pages-user-login-components-login-index-prefixIcon",submit:"antd-pro-pages-user-login-components-login-index-submit"}},CHL8:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("xIiZ");var r=n(a("VXX2")),u=n(a("zAuD")),l=n(a("BG4o"));a("DC98");var o=n(a("WIJn")),c=n(a("+ufk")),i=n(a("iczh")),d=n(a("7PPT")),s=o.default.Item,f=function(e){var t=e.className,a=(0,l.default)(e,["className"]),n=(0,i.default)(d.default.submit,t);return c.default.createElement(s,null,c.default.createElement(r.default,(0,u.default)({size:"large",className:n,type:"primary",htmlType:"submit"},a)))},m=f;t.default=m},K4Vm:function(e,t,a){"use strict";var n=a("fbTi"),r=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DC98");var u=r(a("WIJn"));a("D5wP");var l=r(a("vZ8k")),o=r(a("rXjv")),c=r(a("cO38")),i=n(a("+ufk")),d=r(a("RYWf")),s=r(a("iczh")),f=r(a("YM0q")),m=r(a("uOkS")),p=r(a("CHL8")),g=r(a("wqp7")),v=r(a("7PPT")),h=function(e){var t=e.className,a=(0,i.useState)([]),n=(0,c.default)(a,2),r=n[0],m=n[1],p=(0,i.useState)(),g=(0,c.default)(p,2),h=g[0],b=g[1],E=(0,d.default)("",{value:e.activeKey,onChange:e.onTabChange}),y=(0,c.default)(E,2),C=y[0],w=y[1],P=[],T=[];return i.default.Children.forEach(e.children,function(e){e&&("LoginTab"===e.type.typeName?P.push(e):T.push(e))}),i.default.createElement(f.default.Provider,{value:{tabUtil:{addTab:function(e){m([].concat((0,o.default)(r),[e]))},removeTab:function(e){m(r.filter(function(t){return t!==e}))}},updateActive:function(e){h[C]?h[C].push(e):h[C]=[e],b(h)}}},i.default.createElement("div",{className:(0,s.default)(t,v.default.login)},i.default.createElement(u.default,{form:e.from,onFinish:function(t){e.onSubmit&&e.onSubmit(t)}},r.length?i.default.createElement(i.default.Fragment,null,i.default.createElement(l.default,{animated:!1,className:v.default.tabs,activeKey:C,onChange:function(e){w(e)}},P),T):e.children)))};h.Tab=g.default,h.Submit=p.default,h.UserName=m.default.UserName,h.Password=m.default.Password,h.Mobile=m.default.Mobile,h.Captcha=m.default.Captcha;var b=h;t.default=b},OalY:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("z6Ls"),u=n(a("+ufk")),l=n(a("7PPT")),o={UserName:{props:{size:"large",id:"userName",prefix:u.default.createElement(r.UserOutlined,{style:{color:"#1890ff"},className:l.default.prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:u.default.createElement(r.LockTwoTone,{className:l.default.prefixIcon}),type:"password",id:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:u.default.createElement(r.MobileTwoTone,{className:l.default.prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},Captcha:{props:{size:"large",prefix:u.default.createElement(r.MailTwoTone,{className:l.default.prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}};t.default=o},TVJM:function(e,t,a){e.exports={main:"antd-pro-pages-user-login-style-main",icon:"antd-pro-pages-user-login-style-icon",other:"antd-pro-pages-user-login-style-other",register:"antd-pro-pages-user-login-style-register"}},YM0q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("+ufk"),r=(0,n.createContext)({}),u=r;t.default=u},anxO:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.fakeAccountLogin=o,t.getFakeCaptcha=i;var r=n(a("Ico4")),u=n(a("UWy3")),l=n(a("t3Un"));function o(e){return c.apply(this,arguments)}function c(){return c=(0,u.default)(r.default.mark(function e(t){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/api/login/account",{method:"POST",data:t}));case 1:case"end":return e.stop()}},e)})),c.apply(this,arguments)}function i(e){return d.apply(this,arguments)}function d(){return d=(0,u.default)(r.default.mark(function e(t){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/api/login/captcha?mobile=".concat(t)));case 1:case"end":return e.stop()}},e)})),d.apply(this,arguments)}},uOkS:function(e,t,a){"use strict";var n=a("fbTi"),r=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DZS5");var u=r(a("X9eP"));a("xIiZ");var l=r(a("VXX2"));a("r6//");var o=r(a("Va1g"));a("DI8j");var c=r(a("l/Ha")),i=r(a("zAuD")),d=r(a("Ico4"));a("KRo4");var s=r(a("NSuV")),f=r(a("UWy3")),m=r(a("BG4o")),p=r(a("cO38"));a("DC98");var g=r(a("WIJn")),v=n(a("+ufk")),h=r(a("B1rl")),b=a("anxO"),E=r(a("OalY")),y=r(a("YM0q")),C=r(a("7PPT")),w=g.default.Item,P=function(e){var t=e.onChange,a=e.defaultValue,n=e.customProps,r=void 0===n?{}:n,u=e.rules,l={rules:u||r.rules};return t&&(l.onChange=t),a&&(l.initialValue=a),l},T=function(e){var t=(0,v.useState)(e.countDown||0),a=(0,p.default)(t,2),n=a[0],r=a[1],g=(0,v.useState)(!1),E=(0,p.default)(g,2),y=E[0],T=E[1],x=(e.onChange,e.customProps),k=(e.defaultValue,e.rules,e.name),N=(e.getCaptchaButtonText,e.getCaptchaSecondText,e.updateActive,e.type),O=(e.tabUtil,(0,m.default)(e,["onChange","customProps","defaultValue","rules","name","getCaptchaButtonText","getCaptchaSecondText","updateActive","type","tabUtil"])),U=(0,v.useCallback)(function(){var e=(0,f.default)(d.default.mark(function e(t){var a;return d.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getFakeCaptcha)(t);case 2:if(a=e.sent,!1!==a){e.next=5;break}return e.abrupt("return");case 5:s.default.success("\u83b7\u53d6\u9a8c\u8bc1\u7801\u6210\u529f\uff01\u9a8c\u8bc1\u7801\u4e3a\uff1a1234"),T(!0);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[]);if((0,v.useEffect)(function(){var t=0,a=e.countDown;return y&&(t=window.setInterval(function(){r(function(e){return e<=1?(T(!1),clearInterval(t),a||60):e-1})},1e3)),function(){return clearInterval(t)}},[y]),!k)return null;var I=P(e),M=O||{};if("Captcha"===N){var S=(0,h.default)(M,["onGetCaptcha","countDown"]);return v.default.createElement(w,{shouldUpdate:!0},function(e){var t=e.getFieldValue;return v.default.createElement(u.default,{gutter:8},v.default.createElement(o.default,{span:16},v.default.createElement(w,(0,i.default)({name:k},I),v.default.createElement(c.default,(0,i.default)({},x,S)))),v.default.createElement(o.default,{span:8},v.default.createElement(l.default,{disabled:y,className:C.default.getCaptcha,size:"large",onClick:function(){var e=t("mobile");U(e)}},y?"".concat(n," \u79d2"):"\u83b7\u53d6\u9a8c\u8bc1\u7801")))})}return v.default.createElement(w,(0,i.default)({name:k},I),v.default.createElement(c.default,(0,i.default)({},x,M)))},x={};Object.keys(E.default).forEach(function(e){var t=E.default[e];x[e]=function(a){return v.default.createElement(y.default.Consumer,null,function(n){return v.default.createElement(T,(0,i.default)({customProps:t.props,rules:t.rules},a,{type:e},n,{updateActive:n.updateActive}))})}});var k=x;t.default=k},wqp7:function(e,t,a){"use strict";var n=a("fbTi"),r=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(a("zAuD"));a("D5wP");var l=r(a("vZ8k")),o=n(a("+ufk")),c=r(a("YM0q")),i=l.default.TabPane,d=function(){var e=0;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+=1,"".concat(t).concat(e)}}(),s=function(e){(0,o.useEffect)(function(){var t=d("login-tab-"),a=e.tabUtil;a&&a.addTab(t)},[]);var t=e.children;return o.default.createElement(i,e,e.active&&t)},f=function(e){return o.default.createElement(c.default.Consumer,null,function(t){return o.default.createElement(s,(0,u.default)({tabUtil:t.tabUtil},e))})};f.typeName="LoginTab";var m=f;t.default=m},zzaQ:function(e,t,a){"use strict";var n=a("fbTi"),r=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Cass");var u=r(a("Y3is")),l=r(a("mK77")),o=r(a("cO38"));a("9tk9");var c=r(a("A5O2")),i=a("z6Ls"),d=n(a("+ufk")),s=a("/ssf"),f=a("LneV"),m=r(a("K4Vm")),p=r(a("TVJM")),g=m.default.Tab,v=m.default.UserName,h=m.default.Password,b=m.default.Mobile,E=m.default.Captcha,y=m.default.Submit,C=function(e){var t=e.content;return d.default.createElement(c.default,{style:{marginBottom:24},message:t,type:"error",showIcon:!0})},w=function(e){var t=e.userLogin,a=void 0===t?{}:t,n=e.submitting,r=a.status,c=a.type,f=(0,d.useState)(!0),w=(0,o.default)(f,2),P=w[0],T=w[1],x=(0,d.useState)("account"),k=(0,o.default)(x,2),N=k[0],O=k[1],U=function(t){var a=e.dispatch;a({type:"login/login",payload:(0,l.default)({},t,{type:N})})};return d.default.createElement("div",{className:p.default.main},d.default.createElement(m.default,{activeKey:N,onTabChange:O,onSubmit:U},d.default.createElement(g,{key:"account",tab:"\u8d26\u6237\u5bc6\u7801\u767b\u5f55"},"error"===r&&"account"===c&&!n&&d.default.createElement(C,{content:"\u8d26\u6237\u6216\u5bc6\u7801\u9519\u8bef\uff08admin/ant.design\uff09"}),d.default.createElement(v,{name:"userName",placeholder:"\u7528\u6237\u540d: admin or user",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]}),d.default.createElement(h,{name:"password",placeholder:"\u5bc6\u7801: ant.design",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]})),d.default.createElement(g,{key:"mobile",tab:"\u624b\u673a\u53f7\u767b\u5f55"},"error"===r&&"mobile"===c&&!n&&d.default.createElement(C,{content:"\u9a8c\u8bc1\u7801\u9519\u8bef"}),d.default.createElement(b,{name:"mobile",placeholder:"\u624b\u673a\u53f7",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\uff01"},{pattern:/^1\d{10}$/,message:"\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\uff01"}]}),d.default.createElement(E,{name:"captcha",placeholder:"\u9a8c\u8bc1\u7801",countDown:120,getCaptchaButtonText:"",getCaptchaSecondText:"\u79d2",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\uff01"}]})),d.default.createElement("div",null,d.default.createElement(u.default,{checked:P,onChange:function(e){return T(e.target.checked)}},"\u81ea\u52a8\u767b\u5f55"),d.default.createElement("a",{style:{float:"right"}},"\u5fd8\u8bb0\u5bc6\u7801")),d.default.createElement(y,{loading:n},"\u767b\u5f55"),d.default.createElement("div",{className:p.default.other},"\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f",d.default.createElement(i.AlipayCircleOutlined,{className:p.default.icon}),d.default.createElement(i.TaobaoCircleOutlined,{className:p.default.icon}),d.default.createElement(i.WeiboCircleOutlined,{className:p.default.icon}),d.default.createElement(s.Link,{className:p.default.register,to:"/user/register"},"\u6ce8\u518c\u8d26\u6237"))))},P=(0,f.connect)(function(e){var t=e.login,a=e.loading;return{userLogin:t,submitting:a.effects["login/login"]}})(w);t.default=P}}]);