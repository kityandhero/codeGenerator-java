(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"Nv+D":function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n("p0pE"));n("qVdP");var o=a(n("jsC+"));n("lUTK");var i=a(n("BvKs"));n("+L6B");var r=a(n("2/Rp"));n("/zsF");var c=a(n("PArb"));n("14J3");var d=a(n("BMrR"));n("jCWc");var u=a(n("kPKH"));n("/xke");var f=a(n("TeRw"));n("miYZ");var m=a(n("tsqr")),s=a(n("2Taf")),g=a(n("l4Ni")),p=a(n("ujKo")),h=a(n("rlhR")),b=a(n("MhPg"));n("2qtc");var D,E,v,C=a(n("kLXV")),y=a(n("q1tI")),I=n("MuoO"),k=n("7DNP"),F=n("RBnf"),T=n("uJMD"),x=a(n("7pZ8")),w=n("ydnR"),S=n("i0ey"),O=a(n("zmXK")),A=a(n("lLw4")),R=a(n("paK7")),B=n("ShOv"),M=C.default.confirm,N=(D=(0,I.connect)(function(e){var t=e.connectionConfig,n=e.global,a=e.loading;return{connectionConfig:t,global:n,loading:a.models.connectionConfig}}),D((v=function(e){function t(e){var n;return(0,s.default)(this,t),n=(0,g.default)(this,(0,p.default)(t).call(this,e)),n.componentAuthority=x.default.connectionConfig.list,n.getApiData=function(e){var t=e.connectionConfig.data;return t},n.handleItem=function(e,t){var a=n.state.metaOriginalData,l=-1;a.list.forEach(function(t,n){var a=t.connectionId;a===e&&(l=n)}),l>=0&&(a.list[l]=t(a.list[l]),n.setState({metaOriginalData:a}))},n.removeConfirm=function(e){var t=(0,h.default)(n),a=t.state.processing;M({title:"\u5220\u9664\u6570\u636e\u8fde\u63a5",content:"\u786e\u5b9a\u8981\u5220\u9664\u6570\u636e\u8fde\u63a5 ".concat(null==e?"":e.title," \u5417\uff1f"),okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",confirmLoading:{processing:a},onOk:function(){t.remove(e)},onCancel:function(){m.default.info("\u53d6\u6d88\u4e86\u5220\u9664\u64cd\u4f5c\uff01")}})},n.remove=function(e){var t=n.props.dispatch,a=(0,T.pretreatmentRequestParams)({},function(t){var n=t;return n.connectionId=e.connectionId,n});n.setState({processing:!0}),t({type:"connectionConfig/remove",payload:a}).then(function(){var e=n.props.connectionConfig.data,t=e.dataSuccess;t&&(requestAnimationFrame(function(){f.default.success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u6570\u636e\u5df2\u7ecf\u5220\u9664\u6210\u529f\uff0c\u8bf7\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\u3002"})}),n.setState({processing:!1}),n.reloadData())})},n.goToAdd=function(){var e=n.props.dispatch,t={pathname:"/connectionConfig/add"};e(k.routerRedux.push(t))},n.goToEdit=function(e){var t=n.props.dispatch,a=e.connectionConfigId,l={pathname:"/connectionConfig/edit/load/".concat(a,"/key/basicInfo")};t(k.routerRedux.push(l))},n.handleMenuClick=function(e,t){var a=e.key;switch(a){case"delete":n.removeConfirm(t);break;case"openDatabase":n.openDatabase(t);break;default:break}},n.openDatabase=function(e){var t=n.props.dispatch,a=e.connectionConfigId;n.setState({processing:!0}),t({type:"connectionConfig/tryConnection",payload:{connectionConfigId:a}}).then(function(){var t=n.props.connectionConfig.data,a=t.dataSuccess;a&&requestAnimationFrame(function(){f.default.success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u5373\u5c06\u6253\u5f00\u6570\u636e\u8fde\u63a5 \u201c".concat(e.name,"\u201d")})}),n.setState({processing:!1})})},n.renderBatchActionMenu=function(){return[{key:"batchDelete",name:"\u6279\u91cf\u5220\u9664",icon:y.default.createElement(F.DeleteOutlined,null)}]},n.onBatchActionSelect=function(e){switch(e){case"batchDelete":n.onBatchDelete();break;default:break}},n.onBatchDelete=function(){m.default.info("onBatchDelete")},n.renderSimpleFormInitialValues=function(){var e={};return e[B.fieldData.encoding.name]=w.unlimitedWithStringFlag.flag,e[B.fieldData.databaseType.name]=w.unlimitedWithStringFlag.flag,e},n.renderSimpleFormRow=function(){return y.default.createElement(y.default.Fragment,null,y.default.createElement(d.default,{gutter:24},y.default.createElement(u.default,{lg:6,md:12,sm:24,xs:24},n.renderSearchInputFormItem(B.fieldData.name.label,B.fieldData.name.name,(0,T.buildFieldHelper)("\u4f9d\u636e\u540d\u79f0\u8fdb\u884c\u68c0\u7d22"))),y.default.createElement(u.default,{lg:6,md:12,sm:24,xs:24},n.renderSearchDatabaseEncodingFormItem(!0)),y.default.createElement(u.default,{lg:6,md:12,sm:24,xs:24},n.renderSearchDatabaseDatabaseTypeFormItem(!0)),n.renderSimpleFormButton()))},n.renderExtraAction=function(){var e=n.state,t=e.dataLoading,a=e.processing;return n.checkAuthority(x.default.connectionConfig.add)?y.default.createElement(y.default.Fragment,null,y.default.createElement(c.default,{type:"vertical"}),y.default.createElement(r.default,{key:"buttonPlus",disabled:t||a,type:"primary",icon:y.default.createElement(F.PlusOutlined,null),onClick:n.goToAdd},"\u65b0\u589e")):null},n.getColumn=function(){return[{title:B.fieldData.name.label,dataIndex:B.fieldData.name.name,align:"left",render:function(e){return y.default.createElement(y.default.Fragment,null,e||"--")}},{title:B.fieldData.schema.label,dataIndex:B.fieldData.schema.name,width:200,align:"center",render:function(e){return y.default.createElement(y.default.Fragment,null,e||"--")}},{title:B.fieldData.databaseType.label,dataIndex:B.fieldData.databaseType.name,width:120,align:"center",render:function(e){return y.default.createElement(y.default.Fragment,null,y.default.createElement(A.default,{tooltip:!0,lines:1},n.getDatabaseDatabaseTypeName("".concat(e||""))))}},{title:B.fieldData.connectionType.label,dataIndex:B.fieldData.connectionType.name,width:120,align:"center",render:function(e){return y.default.createElement(y.default.Fragment,null,y.default.createElement(A.default,{tooltip:!0,lines:1},n.getDatabaseConnectionTypeName("".concat(e||""))))}},{title:B.fieldData.encoding.label,dataIndex:B.fieldData.encoding.name,width:120,align:"center",render:function(e){return y.default.createElement(y.default.Fragment,null,y.default.createElement(A.default,{tooltip:!0,lines:1},n.getDatabaseEncodingName("".concat(e||""))))}},{title:B.fieldData.connectionConfigId.label,dataIndex:B.fieldData.connectionConfigId.name,width:120,align:"center",render:function(e){return y.default.createElement(y.default.Fragment,null,y.default.createElement(R.default,{tooltip:!0,lines:1,removeChildren:!0,extraContent:y.default.createElement(y.default.Fragment,null,y.default.createElement("a",{onClick:function(){(0,T.copyToClipboard)(e)}},(0,T.replaceTargetText)(e,"***",2,6)))},e," [\u70b9\u51fb\u590d\u5236]"))}},{title:S.constants.channelNote.label,dataIndex:S.constants.channelNote.name,width:160,align:"center",render:function(e,t){return y.default.createElement(y.default.Fragment,null,y.default.createElement(A.default,{tooltip:!0,lines:1},t.channelNote))}},{title:S.constants.createTime.label,dataIndex:S.constants.createTime.name,width:140,align:"center",sorter:!1,render:function(e){return y.default.createElement(y.default.Fragment,null,y.default.createElement(A.default,{tooltip:!0,lines:1},""===(e||"")?"--":(0,T.formatDatetime)((0,T.toDatetime)(e),"YYYY-MM-DD HH:mm")))}},{title:S.constants.customOperate.label,dataIndex:S.constants.customOperate.name,width:106,fixed:"right",align:"center",render:function(e,t){return y.default.createElement(y.default.Fragment,null,y.default.createElement(o.default.Button,{size:"small",onClick:function(){return n.goToEdit(t)},overlay:y.default.createElement(i.default,{onClick:function(e){return n.handleMenuClick(e,t)}},y.default.createElement(i.default.Item,{key:"openDatabase"},y.default.createElement(F.DatabaseOutlined,null),"\u8fde\u63a5\u6570\u636e\u5e93"),y.default.createElement(i.default.Item,{key:"delete"},y.default.createElement(F.DeleteOutlined,null),"\u5220\u9664\u8fde\u63a5"))},y.default.createElement(F.EditOutlined,null),"\u4fee\u6539"))}}]},n.state=(0,l.default)({},n.state,{pageName:"\u6570\u636e\u8fde\u63a5\u5217\u8868",paramsKey:"938bdc77-66b5-4afe-835b-9aa64a7ead5b",loadApiPath:"connectionConfig/pageList",showSelect:!0}),n}return(0,b.default)(t,e),t}(O.default),E=v))||E),P=N;t.default=P}}]);