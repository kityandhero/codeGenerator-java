(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"Nv+D":function(e,n,t){"use strict";t.r(n);var a=t("k1fw"),o=(t("qVdP"),t("jsC+")),i=(t("lUTK"),t("BvKs")),c=(t("+L6B"),t("2/Rp")),r=(t("/zsF"),t("PArb")),l=(t("14J3"),t("BMrR")),d=(t("jCWc"),t("kPKH")),m=(t("/xke"),t("TeRw")),s=(t("miYZ"),t("tsqr")),u=t("fWQN"),f=t("Nsem"),g=t("oZsa"),p=t("tS8v"),b=t("yKVA"),h=(t("2qtc"),t("kLXV")),D=t("q1tI"),E=t.n(D),C=t("/MKj"),v=t("9kvl"),y=t("/MfK"),k=t("xvlK"),I=t("2kZh"),T=t("6VBw"),w=function(e,n){return E.a.createElement(T["a"],Object.assign({},e,{ref:n,icon:I["a"]}))};w.displayName="DatabaseOutlined";var F,O,S,x=E.a.forwardRef(w),j=t("G3dp"),A=t("uJMD"),B=t("7pZ8"),K=t.n(B),N=t("ydnR"),L=t("i0ey"),M=t("zmXK"),P=t("lLw4"),R=t("paK7"),q=t("ShOv"),V=h["a"].confirm,W=(F=Object(C["c"])((function(e){var n=e.connectionConfig,t=e.global,a=e.loading;return{connectionConfig:n,global:t,loading:a.models.connectionConfig}})),F((S=function(e){function n(e){var t;return Object(u["a"])(this,n),t=Object(f["a"])(this,Object(g["a"])(n).call(this,e)),t.componentAuthority=K.a.connectionConfig.list,t.getApiData=function(e){var n=e.connectionConfig.data;return n},t.handleItem=function(e,n){var a=t.state.metaOriginalData,o=-1;a.list.forEach((function(n,t){var a=n.connectionConfigId;a===e&&(o=t)})),o>=0&&(a.list[o]=n(a.list[o]),t.setState({metaOriginalData:a}))},t.removeConfirm=function(e){var n=Object(p["a"])(t),a=n.state.processing;V({title:"\u5220\u9664\u6570\u636e\u8fde\u63a5",content:"\u786e\u5b9a\u8981\u5220\u9664\u6570\u636e\u8fde\u63a5 ".concat(null==e?"":e.title," \u5417\uff1f"),okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",confirmLoading:{processing:a},onOk:function(){n.remove(e)},onCancel:function(){s["a"].info("\u53d6\u6d88\u4e86\u5220\u9664\u64cd\u4f5c\uff01")}})},t.remove=function(e){var n=t.props.dispatch,a=Object(A["K"])({},(function(n){var t=n;return t.connectionConfigId=e.connectionConfigId,t}));t.setState({processing:!0}),n({type:"connectionConfig/remove",payload:a}).then((function(){var e=t.props.connectionConfig.data,n=e.dataSuccess;n&&(requestAnimationFrame((function(){m["a"].success({placement:"bottomRight",message:"\u64cd\u4f5c\u7ed3\u679c",description:"\u6570\u636e\u5df2\u7ecf\u5220\u9664\u6210\u529f\uff0c\u8bf7\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\u3002"})})),t.setState({processing:!1}),t.reloadData())}))},t.goToAdd=function(){var e={pathname:"/connectionConfig/add"};v["d"].push(e)},t.goToEdit=function(e){var n=e.connectionConfigId,t={pathname:"/connectionConfig/edit/load/".concat(n,"/key/basicInfo")};v["d"].push(t)},t.goToDataTablePageList=function(e){var n=e.connectionConfigId,t={pathname:"/connectionConfig/edit/load/".concat(n,"/key/dataTable/pageList")};v["d"].push(t)},t.handleMenuClick=function(e,n){var a=e.key;switch(a){case"delete":t.removeConfirm(n);break;case"openDatabase":t.openDatabase(n);break;default:break}},t.openDatabase=function(e){var n=t.props.dispatch,a=e.connectionConfigId;t.setState({processing:!0}),n({type:"connectionConfig/tryConnection",payload:{connectionConfigId:a}}).then((function(){var n=t.props.connectionConfig.data,a=n.dataSuccess;a?t.setState({processing:!1},(function(){t.goToDataTablePageList(e)})):t.setState({processing:!1})}))},t.renderBatchActionMenu=function(){return[{key:"batchDelete",name:"\u6279\u91cf\u5220\u9664",icon:E.a.createElement(y["a"],null)}]},t.onBatchActionSelect=function(e){switch(e){case"batchDelete":t.onBatchDelete();break;default:break}},t.onBatchDelete=function(){s["a"].info("onBatchDelete")},t.renderSimpleFormInitialValues=function(){var e={};return e[q["fieldData"].encoding.name]=N["unlimitedWithStringFlag"].flag,e[q["fieldData"].databaseType.name]=N["unlimitedWithStringFlag"].flag,e},t.renderSimpleFormRow=function(){return E.a.createElement(E.a.Fragment,null,E.a.createElement(l["a"],{gutter:24},E.a.createElement(d["a"],{lg:6,md:12,sm:24,xs:24},t.renderSearchInputFormItem(q["fieldData"].name.label,q["fieldData"].name.name,Object(A["f"])("\u4f9d\u636e\u540d\u79f0\u8fdb\u884c\u68c0\u7d22"))),E.a.createElement(d["a"],{lg:6,md:12,sm:24,xs:24},t.renderSearchDatabaseEncodingFormItem(!0)),E.a.createElement(d["a"],{lg:6,md:12,sm:24,xs:24},t.renderSearchDatabaseDatabaseTypeFormItem(!0)),t.renderSimpleFormButton()))},t.renderExtraAction=function(){var e=t.state,n=e.dataLoading,a=e.processing;return t.checkAuthority(K.a.connectionConfig.add)?E.a.createElement(E.a.Fragment,null,E.a.createElement(r["a"],{type:"vertical"}),E.a.createElement(c["a"],{key:"buttonPlus",disabled:n||a,type:"primary",icon:E.a.createElement(k["a"],null),onClick:t.goToAdd},"\u65b0\u589e")):null},t.getColumn=function(){return[{title:q["fieldData"].name.label,dataIndex:q["fieldData"].name.name,align:"left",render:function(e){return E.a.createElement(E.a.Fragment,null,e||"--")}},{title:q["fieldData"].schema.label,dataIndex:q["fieldData"].schema.name,width:200,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,e||"--")}},{title:q["fieldData"].databaseType.label,dataIndex:q["fieldData"].databaseType.name,width:120,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(P["a"],{tooltip:!0,lines:1},t.getDatabaseDatabaseTypeName("".concat(e||""))))}},{title:q["fieldData"].connectionType.label,dataIndex:q["fieldData"].connectionType.name,width:120,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(P["a"],{tooltip:!0,lines:1},t.getDatabaseConnectionTypeName("".concat(e||""))))}},{title:q["fieldData"].encoding.label,dataIndex:q["fieldData"].encoding.name,width:120,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(P["a"],{tooltip:!0,lines:1},t.getDatabaseEncodingName("".concat(e||""))))}},{title:q["fieldData"].connectionConfigId.label,dataIndex:q["fieldData"].connectionConfigId.name,width:120,align:"center",render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(R["a"],{tooltip:!0,lines:1,removeChildren:!0,extraContent:E.a.createElement(E.a.Fragment,null,E.a.createElement("a",{onClick:function(){Object(A["h"])(e)}},Object(A["O"])(e,"***",2,6)))},e," [\u70b9\u51fb\u590d\u5236]"))}},{title:L["a"].channelNote.label,dataIndex:L["a"].channelNote.name,width:160,align:"center",render:function(e,n){return E.a.createElement(E.a.Fragment,null,E.a.createElement(P["a"],{tooltip:!0,lines:1},n.channelNote))}},{title:L["a"].createTime.label,dataIndex:L["a"].createTime.name,width:140,align:"center",sorter:!1,render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement(P["a"],{tooltip:!0,lines:1},""===(e||"")?"--":Object(A["q"])(Object(A["W"])(e),"YYYY-MM-DD HH:mm")))}},{title:L["a"].customOperate.label,dataIndex:L["a"].customOperate.name,width:106,fixed:"right",align:"center",render:function(e,n){return E.a.createElement(E.a.Fragment,null,E.a.createElement(o["a"].Button,{size:"small",onClick:function(){return t.goToEdit(n)},overlay:E.a.createElement(i["a"],{onClick:function(e){return t.handleMenuClick(e,n)}},E.a.createElement(i["a"].Item,{key:"openDatabase"},E.a.createElement(x,null),"\u8fde\u63a5\u6570\u636e\u5e93"),E.a.createElement(i["a"].Item,{key:"delete"},E.a.createElement(y["a"],null),"\u5220\u9664\u8fde\u63a5"))},E.a.createElement(j["a"],null),"\u4fee\u6539"))}}]},t.state=Object(a["a"])({},t.state,{},{pageName:"\u6570\u636e\u8fde\u63a5\u5217\u8868",paramsKey:"938bdc77-66b5-4afe-835b-9aa64a7ead5b",loadApiPath:"connectionConfig/pageList",showSelect:!0}),t}return Object(b["a"])(n,e),n}(M["a"]),O=S))||O);n["default"]=W}}]);